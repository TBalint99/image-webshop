(this["webpackJsonpimage-webshop"]=this["webpackJsonpimage-webshop"]||[]).push([[0],{35:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),i=c(18),a=c.n(i),s=c(8),o=c(21),l=c(13),j=c(19),u=c(7),b=c(1),d=n.a.createContext();function O(e){var t=e.children,c=Object(r.useState)([]),n=Object(u.a)(c,2),i=n[0],a=n[1],s=Object(r.useState)([]),O=Object(u.a)(s,2),m=O[0],h=O[1];return Object(r.useEffect)((function(){fetch("https://raw.githubusercontent.com/bobziroll/scrimba-react-bootcamp-images/master/images.json").then((function(e){return e.json()})).then((function(e){return a((function(){var t,c=[],r=Object(j.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=localStorage.getItem("".concat(n.id,"-liked")),a=JSON.parse(i);a&&a.id===n.id?c.push(a):c.push(n)}}catch(s){r.e(s)}finally{r.f()}return c}))}))}),[]),Object(b.jsx)(d.Provider,{value:{allPhotos:i,toggleFavorite:function(e){var t=i.map((function(t){return t.id===e?(!1===t.isFavorite?localStorage.setItem("".concat(t.id,"-liked"),JSON.stringify(Object(l.a)(Object(l.a)({},t),{},{isFavorite:!t.isFavorite}))):localStorage.removeItem("".concat(t.id,"-liked")),Object(l.a)(Object(l.a)({},t),{},{isFavorite:!t.isFavorite})):t}));a(t)},cartItems:m,addToCart:function(e){h((function(t){return[].concat(Object(o.a)(t),[e])}))},removeFromCart:function(e){h((function(t){return t.filter((function(t){return t.id!==e}))}))},emptyCart:function(){h([])}},children:t})}var m=c(2);var h=function(){var e=Object(r.useContext)(d).cartItems.length>0?"ri-shopping-cart-fill":"ri-shopping-cart-line";return Object(b.jsxs)("header",{children:[Object(b.jsx)(s.b,{to:"/",children:Object(b.jsx)("h2",{children:"Pic Some"})}),Object(b.jsx)(s.b,{to:"/cart",children:Object(b.jsx)("i",{className:"".concat(e," ri-fw ri-2x")})})]})};var f=function(){return Object(b.jsx)("footer",{children:Object(b.jsx)(s.b,{to:"/linkedin",children:Object(b.jsx)("i",{className:"ri-linkedin-box-fill"})})})};var v=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),c=t[0],n=t[1],i=Object(r.useRef)(null);function a(){n(!0)}function s(){n(!1)}return Object(r.useEffect)((function(){return i.current.addEventListener("mouseenter",a),i.current.addEventListener("mouseleave",s),function(){try{i.current&&(i.current.removeEventListener("mouseleave",s),i.current.removeEventListener("mouseenter",a))}catch(e){console.log(e)}}}),[]),[c,i]};var x=function(e){var t=e.item,c=v(),n=Object(u.a)(c,2),i=n[0],a=n[1],s=Object(r.useContext)(d).removeFromCart,o=i?"ri-delete-bin-fill":"ri-delete-bin-line";return Object(b.jsxs)("div",{className:"cart-item",children:[Object(b.jsx)("i",{className:o,onClick:function(){return s(t.id)},ref:a}),Object(b.jsx)("img",{src:t.url,width:"130px"}),Object(b.jsx)("p",{children:"$5.99"})]})},g=function(e){var t=e.onClick,c=e.children;return Object(b.jsx)("button",{className:"btn draw-border",onClick:t,children:c})};var p=function(){var e=Object(r.useState)("Place Order"),t=Object(u.a)(e,2),c=t[0],n=t[1],i=Object(r.useContext)(d),a=i.cartItems,s=i.emptyCart,o=(5.99*a.length).toLocaleString("en-US",{style:"currency",currency:"USD"}),l=a.map((function(e){return Object(b.jsx)(x,{item:e},e.id)}));return Object(b.jsxs)("main",{className:"cart-page",children:[Object(b.jsx)("h1",{children:"Check out"}),l,Object(b.jsxs)("p",{className:"total-cost",children:["Total: ",o]}),a.length>0?Object(b.jsx)("div",{className:"order-button",children:Object(b.jsx)(g,{onClick:function(){n("Ordering..."),setTimeout((function(){console.log("Order placed!"),n("Place Order"),s()}),3e3)},children:c})}):Object(b.jsx)("p",{children:"You have no items in your cart."})]})};var C=function(e){var t=e.className,c=e.img,n=v(),i=Object(u.a)(n,2),a=i[0],s=i[1],o=Object(r.useContext)(d),l=o.toggleFavorite,j=o.addToCart,O=o.cartItems,m=o.removeFromCart;return Object(b.jsxs)("div",{className:"".concat(t," image-container"),ref:s,children:[Object(b.jsx)("img",{src:c.url,className:"image-grid"}),c.isFavorite?Object(b.jsx)("i",{className:"ri-heart-fill favorite",onClick:function(){return l(c.id)}}):a?Object(b.jsx)("i",{className:"ri-heart-line favorite",onClick:function(){return l(c.id)}}):void 0,O.some((function(e){return e.id===c.id}))?Object(b.jsx)("i",{className:"ri-shopping-cart-fill cart",onClick:function(){return m(c.id)}}):a?Object(b.jsx)("i",{className:"ri-add-circle-line cart",onClick:function(){return j(c)}}):void 0]})};function k(e){return e%5===0?"big":e%6===0?"wide":void 0}var N=function(){var e=Object(r.useContext)(d).allPhotos.map((function(e,t){return Object(b.jsx)(C,{img:e,className:k(t)},e.id)}));return Object(b.jsx)("main",{className:"photos",children:e})};var S=function(){return Object(b.jsx)("main",{className:"linked-in",children:Object(b.jsx)("h1",{children:"Check out my LinkedIn page!"})})};var y=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{}),Object(b.jsxs)(m.c,{children:[Object(b.jsx)(m.a,{exact:!0,path:"/",children:Object(b.jsx)(N,{})}),Object(b.jsx)(m.a,{path:"/cart",children:Object(b.jsx)(p,{})}),Object(b.jsx)(m.a,{path:"/linkedin",children:Object(b.jsx)(S,{})})]}),Object(b.jsx)(f,{})]})};a.a.render(Object(b.jsx)(O,{children:Object(b.jsx)(s.a,{children:Object(b.jsx)(y,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.9d119e10.chunk.js.map